<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
<link rel="stylesheet" type="text/css" href="style.css">

<script src="ws.js"></script>
<script src="joy.js"></script>
<!-- <script>var xhttp = new XMLHttpRequest();</script>

<script>function getbattery() {
    xhttp.open('GET', 'battery', false);
    xhttp.send();
    console.log(xhttp.responseText);
    document.getElementById("battery").innerHTML = xhttp.responseText
} </script>


<script type="text/javascript">var timer = setInterval(function () {
        getbattery();
    }, 5 * 1000); </script> -->


<script>function start_stream() {
        var streamLink = "<IMG SRC='http://%WIFI_ADDR%:%STREAM_PORT%/stream' style='width:300px;'>";
        document.getElementById("stream").innerHTML = streamLink
    }
</script>

<p align=center id="stream"> </p><br /><br />
<!-- <p align=center id="stream"></p> -->

<p align=center>
    <button onclick="start_stream()">(Re)Stream</button>
</p>


<p align=left id="battery"></p>

<p align=center><a href="/admin/">File Server Admin</a></p>

<p align=center>
    <button style=width:140px;height:40px onmousedown=sendLedWs()>LED</button>
</p>
<p align=center>
<div id="joyDiv" style="width: 300px; height: 300px; margin: auto; touch-action: none; "></div>
</p>



<script type="text/javascript">

    var Joy = new JoyStick('joyDiv', {}, function (stickData) {
        //inverted y
        sendAxisWs([stickData.x, -stickData.y]);
    });


</script>